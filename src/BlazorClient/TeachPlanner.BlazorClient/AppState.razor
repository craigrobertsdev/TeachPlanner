@using TeachPlanner.Shared.Domain.Teachers
@inject IJSRuntime JSRuntime
@inject HttpClient Http

<CascadingValue Value="this">
    @ChildContent
</CascadingValue>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    private bool _isDirty;
    public TeacherId? TeacherId { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender) {
        await base.OnAfterRenderAsync(firstRender);
        await LoadStateFromLocalStorage();
    }

    private async Task LoadStateFromLocalStorage() {
        var state = await JSRuntime.InvokeAsync<string>("loadStateFromLocalStorage");

        var userId = "";
        if (state == null) {
            var teacherId = await Http.GetFromJsonAsync<Guid>($"api/user/{userId}");
        }
    }


}
